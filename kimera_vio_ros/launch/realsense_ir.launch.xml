<launch>
  <group>
    <arg name="dataset_name" default="RealSense_IR"/>
    <arg name="parallel" default="true" />
    <arg name="use_sim_time" default="false" />
    <!-- TODO: rectified should be true for realsense
      as the realsense node publishes rectified images -->
    <arg name="rectified" default="false" />
    <arg name="use_lcd" default="true"/>

    <arg name="log_output" default="false"/>

    <!-- Subscribed Topics -->
    <let name="topic.left.image"    value="/camera/infra1/image_rect_raw"/>
    <let name="topic.right.image"   value="/camera/infra2/image_rect_raw"/>
    <let name="topic.imu.data"      value="/camera/imu/sample"/>

    <let name="use_camera_info"     value="true"/>
    <let name="topic.left.info"     value="/camera/infra1/camera_info"/>
    <let name="topic.right.info"    value="/camera/infra2/camera_info"/>

    <!-- Frame IDs for Odometry -->
    <let name="frame_id.base_link" value="base_link" />

    <!-- Launch actual pipeline -->
    <include file="$(find-pkg-share kimera_vio_ros)/launch/kimera_vio_ros.launch.xml"/>
  </group>

  <!-- Kimera assumes the imu is fundamentally the `base_link` refrence frame.
    To keep the TF tree a tree, we can just publish a static TF
    that is just the inverse of the camera_link to camera_imu_optical_frame tf.
    E.g: `$ ros2 run tf2_ros tf2_echo camera_imu_optical_frame camera_link` -->
  <node name="base_link_to_camera_link" pkg="tf2_ros" exec="static_transform_publisher"
    args="-0.006 0.005 0.012 0.500 -0.500 0.500 0.500 base_link camera_link" />

</launch>
